<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>防疫產品</title>
    <link rel="icon" href="./IMAGE/icon/iconcovid19.png" type="image/png" sizes="16x16">
    <link rel="stylesheet" href="topnav.css">
    <script src="./jquery-3.6.0.js"></script>
    <style>
        body {
            position: relative;
        }

        .divProduct div {
            display: inline-block;
            text-align: center;

        }

        .divProduct div img {
            width: 250px;
            height: 250px;
        }

        #mymain {
            text-align: center;
            display: inline-flex;
            width: 100%;
            justify-content: center;
            /* padding-top: 70px; */
        }

        #divCar {
            background-color: #DAEBEB;
            position: fixed;
            right: 0px;
            top: 73px;
            font-size: 14px;
            width: 20%;
            height: 100%;
            display: none;

        }

        #tbCar {
            
            text-align: center;
            margin: 2px auto;
        }
        .btnAddItem{
            margin-top: 6px;            
            background-color: #ebebeb;
            border: solid 1px gray;
            border-radius: 5px;
            font-size: 14px;
            color: black;
        }
        .btnAddItem:hover{
            background-color: #DAEBEB;
        }

    </style>
</head>

<body>
    <header>
        <div id="mytopnav">
            <!-- <div class="topnav"> -->
            <a href="Page0Index.html">
                <img id="covidLogo" src="./IMAGE/icon/logo.jpg" alt="logo">
            </a>
            <!-- </div> -->
            <div class="topnav">
                <a href="Page0Index.html" class="topnavList">首頁</a>
                <div class="topnavList">
                    <a class="topnavList1">關於疫情</a>
                    <div class="topnavContent">
                        <a href="Page1Description.html">認識COVID-19</a>
                        <a href="Page2Protect.html">防疫措施</a>
                        <a href="Page3Diagnosed.html">確診怎麼辦</a>
                    </div>
                </div>
                <a href="Page4Product.html" class="topnavList">防疫用品</a>
                <a href="Page5Login.html" class="topnavList">會員中心</a>
                <!-- <a href="" class="topnavList">其他連結</a> -->
                <!-- <a href="" class="topnavList">關於我們</a> -->
            </div>
            <div id="topnavRight" class="topnav">
                <button onclick="clickloginbtn('signup')" type="button" class="btn">註冊</button>
                <button onclick="clickloginbtn('login')" type="button" class="btn">登入</button>
            </div>
        </div>
    </header>

    <main id="mymain">

        <div>
            <h1>防疫產品</h1>
            <!-- <div id="">
                <p id="proitem">
                    <input type="checkbox">口罩</input>
                    <input type="checkbox">酒精</input>
                    <input type="checkbox">其他</input>
                </p>
            </div> -->

            <div class="divProduct">
                <div id="mask">
                    <div>
                        <img src="./IMAGE/product/mask01.jpg" alt="">
                        <br>
                        <span>品名：</span><span class="classProduct">口罩-粉</span><br>
                        <span>售價：NT$</span><span class="classPrice">300</span><br>
                        <span>數量：</span>
                        <select name="q" id="" class="classQuantity">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select><br>
                        <button class="btnAddItem" onclick="addItem('mask')">加入購物車</button>
                    </div>
                </div>
                <div id="alcohol">
                    <div>
                        <img src="./IMAGE/product/alcohol01.jpg" alt="">
                        <br>
                        <span>品名：</span><span class="classProduct">酒精棉片-綠</span><br>
                        <span>售價：NT$</span><span class="classPrice">199</span><br>
                        <span>數量：</span>
                        <select name="q" id="" class="classQuantity">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select><br>
                        <button class="btnAddItem" onclick="addItem('alcohol')">加入購物車</button>
                    </div>
                </div>
                <div id="other">
                    <div >
                        <img src="./IMAGE/product/thermometer01.jpg" alt="">
                        <br>
                        <span>品名：</span><span class="classProduct">耳溫槍</span><br>
                        <span>售價：NT$</span><span class="classPrice">999</span><br>
                        <span>數量：</span>
                        <select name="q" id="" class="classQuantity">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select><br>
                        <button class="btnAddItem" onclick="addItem('other')">加入購物車</button>
                    </div>
                </div>

            </div>

        </div>
        <div id="divCar">
            <h2>購物車</h2>
            <table id="tbCar">
                <tr>
                    <th>產品</th>
                    <th>品名</th>
                    <th>售價</th>
                    <th>數量</th>
                    <th>小計</th>
                </tr>
            </table>

            <div>

                <span>合計：</span><span id="total">0</span><span>元</span> <input onclick="pay()" type="button" value="前往結帳">
            </div>
        </div>
    </main>


    <script>


        function addItem(divName) {

            // 先顯示購物車區塊
            var x = document.getElementById('divCar');
            if (x.style.display === "none" || x.style.display === "") {
                x.style.display = "block";
            }

            //將對應的商品&數量&價格加入購物車

            var addDiv = document.getElementById(divName);
            console.log(addDiv);
            var addDivImg = $(addDiv).find('img').prop('src');
            console.log(addDivImg);
            var addDivProduct = $(addDiv).find('.classProduct').html();
            console.log(addDivProduct);
            var addDivPrice = $(addDiv).find('.classPrice').html();
            console.log(addDivPrice);
            var addDivQuantity = $(addDiv).find('.classQuantity').select().val();
            console.log(addDivQuantity);
            var addDivTotal = parseInt(addDivPrice) * parseInt(addDivQuantity);
            console.log(addDivTotal);

            var addTable = document.createElement("tr");

            addTable.innerHTML =
                `<td><img style="width:50px" src="${addDivImg}" alt"圖片" >  </img></td>` +
                '<td>' + addDivProduct + '</td>' +
                '<td>' + addDivPrice + '</td>' +
                '<td>' + addDivQuantity + '</td>' +
                `<td>  ${addDivTotal} 元 </td>`;

            // tbCar.appendChild(addTable);
            $('#tbCar').append(addTable);
            var carTotal = document.getElementById('total').innerText;
            console.log(carTotal);
            var total = parseInt(carTotal) + addDivTotal;
            $('#total').text(total);

        }

        // 設定前往結帳按鈕
        // 將購物車內容儲存，前往到購物車頁面
        function pay(){
            var carItem=document.getElementById('tbCar').innerHTML;
            localStorage.setItem("car", carItem);
            var Total=document.getElementById('total').innerText;
            localStorage.setItem("total", Total);
            console.log(Total);
            location.href ="./Page5Login.html";

        }
    </script>
<script src="topnav.js"></script>
</body>

</html>